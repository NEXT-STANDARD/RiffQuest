# 🔗 SNS/配信チャンネルリンク機能

ランキング参加者が自身のSNSや配信チャンネルを宣伝できる機能です。

## 📋 機能概要

### ユーザー側機能
1. **ランキング参加時にURL登録**
   - Twitter/X
   - YouTube
   - Twitch
   - Instagram
   - TikTok
   - その他のURL

2. **ランキング表示での宣伝**
   - ユーザー名の横にプラットフォームアイコン表示
   - クリックで外部リンクに遷移
   - 新しいタブで開く（`target="_blank"`）

3. **特別実績: 20,000時間達成**
   - 🌟 **「マスター・オブ・ギター」** (Mythic)
   - 累計20,000時間練習達成者への最高峰の称号

## 🎯 実装内容

### 1. Supabaseテーブル拡張
```sql
-- leaderboardテーブルにsocial_urlカラムを追加
ALTER TABLE leaderboard ADD COLUMN social_url TEXT;
```

**マイグレーションファイル**: `supabase-migration.sql`

### 2. ユーザー名登録モーダル更新
**ファイル**: `src/renderer/components/UsernameModal.tsx`

- URL入力欄を追加（オプショナル）
- URLバリデーション実装
- プレースホルダー例: `https://twitter.com/yourname`
- ヒントテキストで説明

### 3. Dashboard統合
**ファイル**: `src/renderer/components/Dashboard.tsx`

- `sendScoreToSupabase()` にsocial_url パラメータ追加
- LocalStorageからURLを取得・送信
- レベルアップ時の自動更新にも対応

### 4. Leaderboard表示機能
**ファイル**: `src/renderer/components/Leaderboard.tsx`

**プラットフォーム自動判定**:
- Twitter/X: 🐦
- YouTube: ▶️
- Twitch: 📺
- Instagram: 📷
- TikTok: 🎵
- その他: 🔗

**UIデザイン**:
- ユーザー名の横にアイコン表示
- ホバーで拡大アニメーション
- クリックで外部リンクに遷移

### 5. 特別実績追加
**ファイル**: `server/database.ts`

```typescript
{
  id: 'twenty_thousand_hours',
  title: 'マスター・オブ・ギター',
  description: '累計20,000時間練習 - 真の達人の証',
  completed: totalMinutes >= 1200000,
  icon: '🌟',
  rarity: 'mythic',
}
```

**合計実績数**: 47個 → **48個**

## 🚀 使い方

### 新規ユーザーの場合
1. ダッシュボードで「🏆 ランキングに参加」をクリック
2. ユーザー名を入力（必須）
3. SNS/配信チャンネルURLを入力（任意）
4. 「保存して参加」をクリック

### 既存ユーザーの場合
URL情報は LocalStorage に保存されているため、次回レベルアップ時に自動的に更新されます。

URLを変更したい場合:
1. ブラウザの開発者ツールを開く
2. Console で以下を実行:
```javascript
localStorage.setItem('riffquest_social_url', 'https://新しいURL');
```
3. ダッシュボードでスコアを再送信

## 📊 Supabaseセットアップ

### 1. Supabase Dashboardにログイン
https://supabase.com/dashboard

### 2. SQLエディタで実行
`supabase-migration.sql` の内容をコピー＆ペーストして実行

### 3. 確認
```sql
SELECT username, social_url FROM leaderboard;
```

## 🎨 デザイン仕様

### アイコン配置
- ユーザー名: 18px, bold
- アイコン: 16px, 0.7透明度
- ホバー時: 1.2倍拡大, 1.0透明度

### カラー
- リンク: デフォルト色（プラットフォームアイコン）
- ホバー: スケールアップアニメーション

## 🔐 セキュリティ

### URLバリデーション
- クライアント側: `new URL()` でバリデーション
- 不正なURL形式はエラー表示

### XSS対策
- React の `href` 属性で自動エスケープ
- `rel="noopener noreferrer"` で安全な外部リンク

### プライバシー
- URLは完全オプショナル
- いつでも削除・変更可能

## 📈 期待される効果

### 配信者のメリット
1. **視聴者獲得**: ランキング上位者のチャンネルに興味を持つユーザー
2. **コミュニティ形成**: 同じギター練習仲間との交流
3. **モチベーション**: ランキング上位を目指す動機付け

### システムのメリット
1. **ユーザーエンゲージメント向上**: SNS連携で継続率アップ
2. **コミュニティ拡大**: 配信者がRiffQuestを宣伝してくれる
3. **競争促進**: トップランカーの存在が他ユーザーの目標に

## 🎯 20,000時間の意義

**Malcolm Gladwellの「1万時間の法則」の2倍**
- 1万時間: プロフェッショナルレベル
- 2万時間: 世界トップクラスの達人レベル

**20,000時間 = 約2.28年間（24時間×365日）**
- 1日1時間: 約54.8年
- 1日2時間: 約27.4年
- 1日3時間: 約18.3年
- 1日4時間: 約13.7年

真の長期目標であり、達成者には「マスター・オブ・ギター」の称号が相応しい！

## 🔄 今後の拡張案

### プロフィールページ
- 専用プロフィールページ作成
- 練習履歴グラフ表示
- 達成実績一覧
- SNSリンク一覧

### バッジシステム
- 20,000時間達成者に特別バッジ
- ランキング1位に王冠マーク
- 連続1年達成者にレジェンドバッジ

### コミュニティ機能
- 同じ目標を持つユーザー同士のフォロー
- 練習仲間検索機能
- グループチャレンジ

## 📝 まとめ

SNS/配信チャンネルリンク機能により、RiffQuestは単なる練習記録ツールから**ギタリストコミュニティプラットフォーム**へと進化します。

20,000時間という壮大な目標を設定することで、長期的なモチベーション維持と、達成者への特別な称号を提供します。

**次のステップ**: Supabase migration を実行して機能を有効化しましょう！🎸🔥
